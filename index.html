<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fox & Owl Story Studio — AuthorCraft Appreciation</title>

  <style>
    :root{
      --bg:#0b0610;
      --panel: rgba(0,0,0,.52);
      --panel2: rgba(0,0,0,.40);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.55);

      --gold: #bd9b40;
      --gold2: rgba(189,155,64,.65);
      --ink: rgba(0,0,0,.65);

      --radius-xl: 26px;
      --radius-lg: 20px;
      --radius-md: 16px;
      --radius-sm: 12px;

      --shadow: 0 20px 70px rgba(0,0,0,.55);
      --stroke: 1px solid rgba(189,155,64,.38);

      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --fontDisplay: ui-serif, Georgia, "Times New Roman", Times, serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family:var(--font);
      background: radial-gradient(1000px 600px at 45% 20%, rgba(88,24,120,.55), rgba(11,6,16,.92) 60%, rgba(11,6,16,1) 100%);
      overflow-x:hidden;
    }

    /* Background overlay (theater/library) */
    .bg-overlay{
      position:fixed;
      inset:0;
      z-index:-2;
      background-size:cover;
      background-position:center;
      filter: blur(.0px);
      opacity:.90;
      transform: scale(1.02);
    }
    body[data-source="film"] .bg-overlay{ background-image:url("./Theater overlay.png"); }
    body[data-source="literature"] .bg-overlay{ background-image:url("./Library overlay.png"); }

    .bg-vignette{
      position:fixed;
      inset:0;
      z-index:-1;
      pointer-events:none;
      background:
        radial-gradient(800px 500px at 50% 35%, rgba(0,0,0,.10), rgba(0,0,0,.65) 70%),
        linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.60));
    }

    /* Layout shell */
    .app{
      min-height:100%;
      display:flex;
      flex-direction:column;
      gap:18px;
      padding:18px 18px 22px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:12px 14px;
      border-radius: 24px;
      border: var(--stroke);
      background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.30));
      box-shadow: 0 8px 30px rgba(0,0,0,.35);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:280px;
    }
    .brand img{
      width:44px;
      height:44px;
      border-radius: 14px;
      object-fit:cover;
      border: 1px solid rgba(189,155,64,.35);
      background: rgba(0,0,0,.35);
    }
    .brand h1{
      margin:0;
      font-family: var(--fontDisplay);
      font-weight: 700;
      letter-spacing: .02em;
      font-size: 20px;
      line-height: 1.1;
    }
    .brand .sub{
      margin-top:2px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.02em;
    }

    /* Toggle pill */
    .pill{
      display:inline-flex;
      align-items:center;
      gap:0;
      padding:6px;
      border-radius: 999px;
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(189,155,64,.28);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .pill button{
      appearance:none;
      border:0;
      background:transparent;
      color:var(--muted);
      font-weight:600;
      padding:10px 16px;
      border-radius:999px;
      cursor:pointer;
      transition: all .15s ease;
      letter-spacing:.01em;
    }
    .pill button.active{
      color:var(--text);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(189,155,64,.30);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .pill button:not(.active):hover{ color:rgba(255,255,255,.86); }

    .top-actions{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:280px;
      justify-content:flex-end;
    }

    .ghost{
      appearance:none;
      border: 1px solid rgba(189,155,64,.28);
      background: rgba(0,0,0,.45);
      color: rgba(255,255,255,.86);
      border-radius: 999px;
      padding:10px 14px;
      font-weight:600;
      cursor:pointer;
      transition: all .15s ease;
    }
    .ghost:hover{ border-color: rgba(189,155,64,.45); }

    /* Main panel */
    .panel{
      width:min(1320px, calc(100% - 6px));
      margin:0 auto;
      border-radius: var(--radius-xl);
      border: var(--stroke);
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.42));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .panel-inner{
      padding: 18px 18px 16px;
    }

    .scene-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:18px;
      padding: 8px 6px 10px;
    }

    .scene-title{
      font-family: var(--fontDisplay);
      font-size: 28px;
      letter-spacing:.01em;
      margin:0 0 6px;
      color: rgba(255,255,255,.92);
    }

    .scene-text{
      margin:0;
      color: rgba(255,255,255,.86);
      font-size: 16px;
      line-height: 1.55;
      max-width: 980px;
    }

    .tier{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:10px;
      min-width:140px;
      padding-top: 6px;
    }
    .tier-badge{
      color: var(--gold);
      font-weight:700;
      letter-spacing:.03em;
      font-size: 14px;
      padding:8px 12px;
      border-radius:999px;
      border: 1px solid rgba(189,155,64,.35);
      background: rgba(0,0,0,.45);
      white-space:nowrap;
    }

    /* Modes row */
    .modes{
      display:flex;
      gap:10px;
      padding: 10px 6px 14px;
      flex-wrap:wrap;
    }
    .mode-btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.55);
      color: rgba(255,255,255,.82);
      border-radius:999px;
      padding:10px 16px;
      font-weight:700;
      letter-spacing:.01em;
      cursor:pointer;
      transition: all .15s ease;
    }
    .mode-btn.active{
      border-color: rgba(189,155,64,.45);
      box-shadow: inset 0 0 0 1px rgba(189,155,64,.22);
      color: var(--gold);
    }
    .mode-btn:hover{
      border-color: rgba(189,155,64,.35);
    }

    .prompt{
      padding: 0 6px 12px;
      color: var(--gold);
      font-weight:700;
      font-size: 20px;
      letter-spacing:.01em;
    }

    /* Mode sections */
    .mode-section{ display:none; padding: 2px 6px 10px; }
    .mode-section.active{ display:block; }

    /* Pair match */
    .pair-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
      padding: 10px 0 6px;
    }
    .pair-col{
      background: rgba(0,0,0,.25);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,.05);
      padding: 12px;
      min-height: 260px;
    }

    /* Pair Match column headers: thin rounded rectangle outline, no fill */
    .pair-column-title {
      background: transparent !important;
      border: 1px solid rgba(189,155,64,0.65);
      border-radius: 14px;
      padding: 10px 14px;
      display:inline-block;
      color: rgba(255,255,255,.92);
      font-weight: 800;
      letter-spacing:.01em;
      margin: 2px 0 10px;
    }

    /* Chips (used by runtime) */
    .chip{
      user-select:none;
      border-radius: 18px;
      padding: 12px 14px;
      background: rgba(0,0,0,.58);
      border: 1px solid rgba(255,255,255,.06);
      margin: 10px 0;
      color: rgba(255,255,255,.90);
      line-height: 1.25;
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
    }
    .chip.selected{
      outline: 2px solid rgba(120,180,255,.95);
      outline-offset: 2px;
    }
    .chip.disabled{
      opacity:.38;
      cursor:not-allowed !important;
    }
    .chip.dragging{ opacity:.60; }

    /* Sliders */
    .sliders{
      background: rgba(0,0,0,.25);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,.05);
      padding: 14px 14px 6px;
    }
    .slider-row{ margin: 16px 0 18px; }
    .slider-axis{
      display:flex;
      align-items:center;
      justify-content:space-between;
      color: rgba(255,255,255,.88);
      font-weight:700;
      font-size: 18px;
      margin-bottom: 10px;
    }
    input[type="range"]{
      width:100%;
      accent-color: var(--gold);
    }

    /* Buckets */
    .buckets-wrap{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    .elements-row{
      background: rgba(0,0,0,.25);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,.05);
      padding: 12px 12px 2px;
    }
    .bucket-grid{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:16px;
    }
    .bucket{
      background: rgba(0,0,0,.25);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,.06);
      min-height: 240px;
      padding: 12px;
      position:relative;
    }
    .bucket h3{
      margin: 4px 4px 10px;
      color: var(--gold);
      font-family: var(--fontDisplay);
      font-size: 22px;
      letter-spacing:.01em;
    }
    .dropzone.dragover{
      outline: 2px solid rgba(120,180,255,.90);
      outline-offset: 3px;
    }

    /* Spotlights */
    .spotlights{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      padding: 10px 0 4px;
    }
    .spotlight{
      border-radius: 18px;
      padding: 14px 14px;
      background: rgba(0,0,0,.58);
      border: 1px solid rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
      cursor:pointer;
      user-select:none;
    }
    .spotlight:hover{ border-color: rgba(189,155,64,.25); }
    .spotlight.selected{
      border-color: rgba(189,155,64,.55);
      box-shadow: inset 0 0 0 1px rgba(189,155,64,.22), 0 14px 30px rgba(0,0,0,.35);
    }

    /* Footer */
    .footer{
      width:min(1320px, calc(100% - 6px));
      margin:0 auto;
      padding: 6px 6px 0;
      color: rgba(255,255,255,.55);
      font-size: 12px;
      letter-spacing:.02em;
      display:flex;
      justify-content:space-between;
      gap:10px;
    }

    /* Landing overlay */
    .landing{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px;
      z-index: 50;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(5px);
    }
    .landing.hidden{ display:none; }

    .landing-card{
      width:min(860px, 96vw);
      border-radius: 28px;
      border: var(--stroke);
      background: linear-gradient(180deg, rgba(0,0,0,.58), rgba(0,0,0,.44));
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .landing-content{
      padding: 22px 22px 18px;
    }
    .landing-title{
      font-family: var(--fontDisplay);
      font-size: 34px;
      margin: 0 0 6px;
      letter-spacing:.01em;
    }
    .landing-desc{
      margin:0;
      color: rgba(255,255,255,.82);
      font-size: 15px;
      line-height: 1.55;
      max-width: 720px;
    }
    .landing-actions{
      display:flex;
      justify-content:flex-end;
      gap:10px;
      padding: 14px 22px 20px;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .primary{
      appearance:none;
      border: 1px solid rgba(189,155,64,.55);
      background: rgba(0,0,0,.55);
      color: var(--gold);
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 900;
      letter-spacing:.03em;
      cursor:pointer;
    }
    .primary:hover{
      border-color: rgba(189,155,64,.75);
    }

    @media (max-width: 920px){
      .pair-grid{ grid-template-columns: 1fr; }
      .bucket-grid{ grid-template-columns: 1fr; }
      .brand{ min-width:unset; }
      .top-actions{ min-width:unset; }
      .scene-title{ font-size: 24px; }
      .prompt{ font-size: 18px; }
    }
  </style>
</head>

<body data-source="film" data-mode="pairMatch">
  <div class="bg-overlay" aria-hidden="true"></div>
  <div class="bg-vignette" aria-hidden="true"></div>

  <!-- Landing -->
  <div class="landing" id="landing">
    <div class="landing-card">
      <div class="landing-content">
        <div style="display:flex; align-items:center; gap:14px;">
          <img src="./Fox and Owl Story Studio Logo.png" alt="Fox & Owl" style="width:56px;height:56px;border-radius:16px;border:1px solid rgba(189,155,64,.35);background:rgba(0,0,0,.35);" />
          <div>
            <h2 class="landing-title" style="margin:0;">AuthorCraft Appreciation</h2>
            <div style="color:rgba(255,255,255,.65); font-size:12px; letter-spacing:.02em; margin-top:4px;">
              Fox & Owl Story Studio
            </div>
          </div>
        </div>

        <p class="landing-desc" style="margin-top:14px;">
          Practice noticing how scenes work—micro-moments, tone, status, constraint, timing, and contrast.
          No scoring. No “correct answers.” Just sharper reading & viewing.
        </p>
      </div>
      <div class="landing-actions">
        <button class="ghost" id="howItWorksBtn" type="button">How it works</button>
        <button class="primary" id="enterBtn" type="button">Play</button>
      </div>
    </div>
  </div>

  <div class="app" id="appRoot">
    <!-- Top bar -->
    <div class="topbar">
      <div class="brand">
        <img src="./Fox and Owl Story Studio Logo.png" alt="Fox & Owl Story Studio" />
        <div>
          <h1>Fox & Owl Story Studio</h1>
          <div class="sub">AuthorCraft Appreciation</div>
        </div>
      </div>

      <div class="pill" role="tablist" aria-label="Source toggle">
        <button id="btnFilm" class="active" type="button" role="tab" aria-selected="true">Film</button>
        <button id="btnLit" type="button" role="tab" aria-selected="false">Literature</button>
      </div>

      <div class="top-actions">
        <button class="ghost" id="nextSceneBtn" type="button" title="Next scene">Next</button>
        <button class="ghost" id="aboutBtn" type="button">About</button>
      </div>
    </div>

    <!-- Main panel -->
    <div class="panel">
      <div class="panel-inner">
        <div class="scene-head">
          <div>
            <h2 class="scene-title" id="scene-title">Scene —</h2>
            <p class="scene-text" id="scene-text"></p>
          </div>
          <div class="tier">
            <div class="tier-badge" id="tier-label">Lantern</div>
          </div>
        </div>

        <div class="modes" role="tablist" aria-label="Mode toggle">
          <button class="mode-btn active" data-mode="pairMatch" type="button">Pair Match</button>
          <button class="mode-btn" data-mode="sliders" type="button">Sliders</button>
          <button class="mode-btn" data-mode="rankBuckets" type="button">Buckets</button>
          <button class="mode-btn" data-mode="interpretiveTakes" type="button">Spotlights</button>
        </div>

        <div class="prompt" id="mode-prompt"></div>

        <!-- Pair Match -->
        <section class="mode-section active" id="mode-pairMatch" aria-label="Pair Match mode">
          <div class="pair-grid">
            <div class="pair-col">
              <div class="pair-column-title">Micro-moments</div>
              <div id="pair-left"></div>
            </div>
            <div class="pair-col">
              <div class="pair-column-title">Why they land</div>
              <div id="pair-right"></div>
            </div>
          </div>
        </section>

        <!-- Sliders -->
        <section class="mode-section" id="mode-sliders" aria-label="Sliders mode">
          <div class="sliders">
            <div id="sliders-container"></div>
          </div>
        </section>

        <!-- Buckets -->
        <section class="mode-section" id="mode-rankBuckets" aria-label="Buckets mode">
          <div class="buckets-wrap">
            <div class="elements-row">
              <div style="color:var(--gold); font-weight:900; letter-spacing:.02em; padding: 4px 6px 10px; font-size:18px;">
                Elements
              </div>
              <div id="bucket-elements"></div>
            </div>

            <div class="bucket-grid">
              <div class="bucket dropzone" id="bucket-engine">
                <h3>Engine</h3>
              </div>
              <div class="bucket dropzone" id="bucket-support">
                <h3>Support</h3>
              </div>
              <div class="bucket dropzone" id="bucket-spice">
                <h3>Spice</h3>
              </div>
            </div>
          </div>
        </section>

        <!-- Spotlights -->
        <section class="mode-section" id="mode-interpretiveTakes" aria-label="Spotlights mode">
          <div class="spotlights" id="spotlights-container"></div>
        </section>
      </div>
    </div>

    <div class="footer">
      <div>Fox & Owl — AuthorCraft Appreciation • No scoring • Practice noticing</div>
      <div style="color:rgba(255,255,255,.45);">v0.1</div>
    </div>
  </div>

  <!-- UI wiring (non-module; safe) -->
  <script>
    (function () {
      const landing = document.getElementById("landing");
      const enterBtn = document.getElementById("enterBtn");
      const howBtn = document.getElementById("howItWorksBtn");

      const btnFilm = document.getElementById("btnFilm");
      const btnLit = document.getElementById("btnLit");
      const nextSceneBtn = document.getElementById("nextSceneBtn");
      const aboutBtn = document.getElementById("aboutBtn");

      const modeButtons = Array.from(document.querySelectorAll(".mode-btn"));
      const modeSections = {
        pairMatch: document.getElementById("mode-pairMatch"),
        sliders: document.getElementById("mode-sliders"),
        rankBuckets: document.getElementById("mode-rankBuckets"),
        interpretiveTakes: document.getElementById("mode-interpretiveTakes")
      };

      function dispatch(name, detail) {
        document.dispatchEvent(new CustomEvent(name, { detail }));
      }

      function setSource(source) {
        document.body.setAttribute("data-source", source);
        const isFilm = source === "film";
        btnFilm.classList.toggle("active", isFilm);
        btnFilm.setAttribute("aria-selected", String(isFilm));
        btnLit.classList.toggle("active", !isFilm);
        btnLit.setAttribute("aria-selected", String(!isFilm));
        dispatch("sourcechange", { source });
      }

      function setMode(modeKey) {
        document.body.setAttribute("data-mode", modeKey);

        modeButtons.forEach(btn => {
          const active = btn.dataset.mode === modeKey;
          btn.classList.toggle("active", active);
          btn.setAttribute("aria-selected", String(active));
        });

        Object.keys(modeSections).forEach(k => {
          modeSections[k].classList.toggle("active", k === modeKey);
        });

        dispatch("modechange", { modeKey });
      }

      // Landing
      enterBtn.addEventListener("click", () => {
        landing.classList.add("hidden");
        // default start
        setSource("film");
        setMode("pairMatch");
      });

      howBtn.addEventListener("click", () => {
        alert(
          "You’re not being tested.\n\n" +
          "Make the strongest read you can defend:\n" +
          "• Micro before macro: cite a gesture, cut, phrase, or beat.\n" +
          "• Name the mechanism: status, irony, constraint, timing, contrast.\n" +
          "• Allow two truths: multiple readings can be valid."
        );
      });

      // Source toggle
      btnFilm.addEventListener("click", () => setSource("film"));
      btnLit.addEventListener("click", () => setSource("literature"));

      // Mode toggle
      modeButtons.forEach(btn => btn.addEventListener("click", () => setMode(btn.dataset.mode)));

      // Next scene (manual)
      nextSceneBtn.addEventListener("click", () => dispatch("scenenext", {}));

      // About
      aboutBtn.addEventListener("click", () => {
        alert(
          "AuthorCraft Appreciation\n\n" +
          "A practice tool for noticing how scenes work.\n" +
          "No scoring. No correctness feedback.\n" +
          "Built in Fox & Owl Story Studio."
        );
      });

      // If you want to skip the landing during development, uncomment:
      // landing.classList.add("hidden"); setSource("film"); setMode("pairMatch");
    })();
  </script>

  <!-- Runtime (ES module) -->
  <script type="module" src="./CraftAppreciation.js?v=1"></script>
</body>
</html>
