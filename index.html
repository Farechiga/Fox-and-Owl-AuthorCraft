<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fox & Owl Story Studio — AuthorCraft Appreciation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      /* slightly brighter plum (less “coder dark mode”) */
      --plum: #3b0f55;
      --plum2:#2a083b;
      --gold:#bd9b40;
      --text:#f7efe3;
      --muted:#d0ced4;
      --glass: rgba(0,0,0,0.40);
      --glass2: rgba(0,0,0,0.55);
      --rose:#b585b7;
    }

    html,body{height:100%;margin:0}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 50% 20%, var(--plum), #130015 70%);
      color:var(--text);
      overflow-x:hidden;
    }

    /* background overlays (existing assets) */
    .bg{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:0.55;
      background-repeat:no-repeat;
      background-position:center;
      background-size:cover;
      filter: blur(0.2px);
    }
    .bg.theater{ background-image: url("Theater overlay.png"); }
    .bg.library{ background-image: url("Library overlay.png"); }

    /* shared card chrome */
    .frame{
      position:relative;
      max-width:1200px;
      margin: 28px auto;
      padding: 18px 22px 22px;
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
      box-shadow: 0 24px 60px rgba(0,0,0,0.55);
      border: 1px solid rgba(189,155,64,0.35);
      backdrop-filter: blur(10px);
    }

    /* ---------------- Landing ---------------- */
    #landing{
      position:fixed; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:5;
    }
    .landing-card{
      width:min(980px, calc(100% - 48px));
      padding: 26px 28px;
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(0,0,0,0.62), rgba(0,0,0,0.35));
      border: 1px solid rgba(189,155,64,0.35);
      box-shadow: 0 30px 80px rgba(0,0,0,0.65);
      backdrop-filter: blur(12px);
      display:flex;
      gap:22px;
      align-items:flex-start;
    }
    .landing-logo{
      width:86px;height:86px;
      border-radius:18px;
      border:1px solid rgba(189,155,64,0.35);
      background: rgba(0,0,0,0.35);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .landing-logo img{ width:100%; height:100%; object-fit:cover; }
    .landing-title{
      font-family: Georgia, "Times New Roman", serif;
      font-size: 56px;
      line-height: 1.02;
      margin: 0;
      letter-spacing: 0.2px;
    }
    .landing-sub{
      margin-top:6px;
      color: rgba(247,239,227,0.85);
      font-size: 18px;
    }
    .landing-desc{
      margin-top: 18px;
      font-size: 24px;
      line-height: 1.35;
      color: rgba(247,239,227,0.92);
      max-width: 820px;
    }
    .landing-actions{
      margin-top: 18px;
      display:flex;
      justify-content:flex-end;
      gap: 14px;
    }
    .btn{
      border-radius: 999px;
      padding: 12px 20px;
      font-weight: 650;
      border: 1px solid rgba(189,155,64,0.45);
      background: rgba(0,0,0,0.55);
      color: var(--text);
      cursor:pointer;
    }
    .btn.primary{
      background: rgba(0,0,0,0.65);
      border-color: rgba(189,155,64,0.75);
      color: var(--gold);
    }

    /* ---------------- App header ---------------- */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 8px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .brand .mini{
      width:44px;height:44px;
      border-radius: 14px;
      overflow:hidden;
      border:1px solid rgba(189,155,64,0.35);
      background: rgba(0,0,0,0.35);
    }
    .brand .mini img{ width:100%; height:100%; object-fit:cover; }
    .brand .name{
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .brand .tag{
      font-size: 13px;
      color: rgba(247,239,227,0.75);
      margin-top:2px;
    }

    .toggles{
      display:flex;
      align-items:center;
      gap:14px;
    }
    .pill-toggle{
      display:flex;
      border-radius: 999px;
      padding: 4px;
      background: rgba(0,0,0,0.55);
      border:1px solid rgba(189,155,64,0.25);
    }
    .pill-toggle button{
      border:0;
      background: transparent;
      color: rgba(247,239,227,0.80);
      padding: 10px 18px;
      border-radius: 999px;
      cursor:pointer;
      font-weight: 650;
    }
    .pill-toggle button.active{
      background: rgba(0,0,0,0.55);
      color: var(--gold);
      border:1px solid rgba(189,155,64,0.35);
    }

    .score{
      color: rgba(247,239,227,0.85);
      font-size: 14px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      border:1px solid rgba(189,155,64,0.20);
      white-space:nowrap;
    }

    /* ---------------- Scene header ---------------- */
    .scene-head{
      margin-top: 14px;
    }
    #scene-title{
      font-family: Georgia, "Times New Roman", serif;
      font-size: 44px;
      margin: 0;
    }
    #scene-text{
      margin-top: 8px;
      font-size: 18px;
      line-height: 1.45;
      color: rgba(247,239,227,0.88);
      max-width: 1040px;
    }
    .tier{
      position:absolute;
      right: 18px;
      top: 120px;
      border-radius: 999px;
      padding: 10px 16px;
      border: 1px solid rgba(189,155,64,0.45);
      color: var(--gold);
      background: rgba(0,0,0,0.55);
      font-weight: 750;
    }

    /* ---------------- Modes + progress ---------------- */
    .modes{
      margin-top: 14px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .mode-pill{
      padding: 10px 16px;
      border-radius: 999px;
      background: rgba(0,0,0,0.55);
      border:1px solid rgba(189,155,64,0.18);
      color: rgba(247,239,227,0.90);
      font-weight: 700;
      user-select:none;
    }
    .mode-pill.active{
      border-color: rgba(189,155,64,0.65);
      color: var(--gold);
      box-shadow: 0 0 0 2px rgba(189,155,64,0.15);
    }

    .progress{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .step{
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(189,155,64,0.18);
      color: rgba(247,239,227,0.75);
      font-weight: 650;
      font-size: 13px;
    }
    .step.active{
      border-color: rgba(189,155,64,0.65);
      color: var(--gold);
    }
    .step.done{
      border-color: rgba(189,155,64,0.35);
      color: rgba(247,239,227,0.85);
    }

    #mode-prompt{
      margin-top: 14px;
      color: var(--gold);
      font-weight: 800;
      font-size: 22px;
    }
    #hint-line{
      margin-top: 8px;
      color: rgba(247,239,227,0.78);
      font-size: 14px;
      min-height: 18px;
    }

    /* ---------------- Chips ---------------- */
    .chip{
      border-radius: 18px;
      padding: 14px 16px;
      background: rgba(0,0,0,0.62);
      border: 1px solid rgba(255,255,255,0.08);
      margin: 10px 0;
      line-height: 1.25;
      cursor:pointer;
      user-select:none;
    }
    .chip.selected{
      box-shadow: 0 0 0 2px rgba(189,155,64,0.35);
      border-color: rgba(189,155,64,0.45);
    }
    .chip.done{
      opacity: 0.88;
    }
    .chip.disabled{
      opacity: 0.35;
      cursor:not-allowed;
    }
    .chip.placed{
      cursor:pointer;
    }
    .shake{
      animation: shake 0.25s linear;
    }
    @keyframes shake{
      0%{transform:translateX(0)}
      25%{transform:translateX(-4px)}
      50%{transform:translateX(4px)}
      75%{transform:translateX(-3px)}
      100%{transform:translateX(0)}
    }

    /* ---------------- Pair match layout ---------------- */
    .pair-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      margin-top: 14px;
    }

    /* Pair Match column headers: thin rounded rectangle, no fill */
    .pair-column-title {
      background: transparent !important;
      border: 1px solid rgba(189,155,64,0.65);
      border-radius: 14px;
      padding: 10px 14px;
      display:inline-block;
      color: rgba(247,239,227,0.92);
      font-weight: 800;
      margin-bottom: 6px;
    }

    /* ---------------- Sliders ---------------- */
    .slider-row{
      margin-top: 18px;
      padding: 12px 14px;
      border-radius: 18px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .slider-axis{
      display:flex;
      justify-content:space-between;
      gap:12px;
      font-weight: 850;
      margin-bottom: 10px;
      color: rgba(247,239,227,0.92);
    }
    input[type="range"]{
      width:100%;
      accent-color: var(--gold);
    }

    /* ---------------- Buckets ---------------- */
    .bucket-area{
      margin-top: 14px;
    }
    .bucket-elements{
      padding: 10px 0;
      border-radius: 18px;
    }
    .bucket-cols{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 14px;
      margin-top: 14px;
    }
    .bucket-col{
      border-radius: 18px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.06);
      padding: 12px;
      min-height: 220px;
    }
    .bucket-title{
      display:inline-block;
      margin-bottom: 10px;
      color: rgba(247,239,227,0.92);
      font-weight: 900;
      border: 1px solid rgba(189,155,64,0.35);
      border-radius: 14px;
      padding: 8px 12px;
      background: rgba(0,0,0,0.25);
    }
    .bucket-drop{
      min-height: 160px;
      border-radius: 14px;
      padding: 8px;
      border: 1px dashed rgba(189,155,64,0.25);
    }
    .bucket-drop.dragover{
      border-color: rgba(189,155,64,0.65);
      box-shadow: 0 0 0 2px rgba(189,155,64,0.15);
    }

    /* ---------------- Spotlights Top3 ---------------- */
    .top3{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      margin-top: 14px;
    }
    .top3-slot{
      border-radius: 18px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.06);
      padding: 12px;
      min-height: 140px;
    }
    .top3-label{
      font-weight: 950;
      color: rgba(247,239,227,0.85);
      margin-bottom: 10px;
    }
    .top3-body{
      border-radius: 14px;
      min-height: 90px;
      border: 1px dashed rgba(181,133,183,0.45);
      padding: 10px;
      color: rgba(247,239,227,0.70);
    }
    .top3-body.empty{ display:flex; align-items:center; justify-content:center; }
    .top3-body.dragover{
      box-shadow: 0 0 0 2px rgba(181,133,183,0.22);
      border-color: rgba(181,133,183,0.75);
    }

    .spotlight-list{
      margin-top: 14px;
    }
    .spotlight{
      border-radius: 18px;
      padding: 14px 16px;
      background: rgba(0,0,0,0.62);
      border: 1px solid rgba(255,255,255,0.08);
      margin: 10px 0;
      cursor:pointer;
      user-select:none;
    }
    .spotlight.selected{
      border-color: rgba(181,133,183,0.95);
      box-shadow: 0 0 0 2px rgba(181,133,183,0.20);
      background: rgba(181,133,183,0.12);
    }
    .spotlight.disabled{
      opacity: 0.35;
      cursor:not-allowed;
    }

    /* mode sections */
    .mode-section{ margin-top: 8px; }
  </style>
</head>

<body>
  <!-- background overlay swaps between theater/library based on toggle -->
  <div id="bg" class="bg theater"></div>

  <!-- LANDING (restored) -->
  <div id="landing">
    <div class="landing-card">
      <div class="landing-logo">
        <img src="Fox and Owl Story Studio Logo_Characters Only.png" alt="Fox & Owl" />
      </div>

      <div style="flex:1 1 auto;">
        <h1 class="landing-title">AuthorCraft Appreciation</h1>
        <div class="landing-sub">Fox & Owl Story Studio</div>

        <div class="landing-desc">
          Practice noticing how scenes work—micro-moments, tone, status, constraint, timing, and contrast.
          Just sharper reading & viewing.
        </div>

        <div class="landing-actions">
          <button id="btn-play" class="btn primary">Play</button>
        </div>
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" class="frame">
    <div class="topbar">
      <div class="brand">
        <div class="mini">
          <img src="Fox and Owl Story Studio Logo_Characters Only.png" alt="Fox & Owl" />
        </div>
        <div>
          <div class="name">Fox & Owl Story Studio</div>
          <div class="tag">AuthorCraft Appreciation</div>
        </div>
      </div>

      <div class="toggles">
        <div class="pill-toggle" aria-label="Film or Literature">
          <button id="btn-film" class="active">Film</button>
          <button id="btn-lit">Literature</button>
        </div>

        <div id="score-label" class="score">Scenes completed: 0</div>
      </div>
    </div>

    <div class="scene-head">
      <h2 id="scene-title"></h2>
      <div id="scene-text"></div>
      <div id="tier-label" class="tier"></div>
      <div id="gate-icons"></div>
    </div>

    <div class="modes">
      <div id="mode-pill-pair" class="mode-pill active">Pair Match</div>
      <div id="mode-pill-sliders" class="mode-pill">Sliders</div>
      <div id="mode-pill-buckets" class="mode-pill">Buckets</div>
      <div id="mode-pill-spotlights" class="mode-pill">Spotlights</div>
    </div>

    <div id="mode-progress" class="progress"></div>

    <div id="mode-prompt"></div>
    <div id="hint-line"></div>

    <!-- Mode: Pair Match -->
    <section id="mode-pair" class="mode-section">
      <div class="pair-grid">
        <div>
          <div class="pair-column-title">Micro-moments</div>
          <div id="pair-left"></div>
        </div>
        <div>
          <div class="pair-column-title">Why they land</div>
          <div id="pair-right"></div>
        </div>
      </div>
    </section>

    <!-- Mode: Sliders -->
    <section id="mode-sliders" class="mode-section" style="display:none;">
      <div id="sliders-container"></div>
    </section>

    <!-- Mode: Buckets -->
    <section id="mode-buckets" class="mode-section" style="display:none;">
      <div class="bucket-area">
        <div id="bucket-elements" class="bucket-elements"></div>
        <div id="bucket-cols" class="bucket-cols"></div>
      </div>
    </section>

    <!-- Mode: Spotlights -->
    <section id="mode-spotlights" class="mode-section" style="display:none;">
      <div id="spotlights-container"></div>
    </section>
  </div>

  <!-- JS -->
  <script type="module" src="CraftAppreciation.js"></script>

  <script>
    // landing → app page
    document.getElementById("btn-play").addEventListener("click", () => {
      document.dispatchEvent(new CustomEvent("play"));
    });

    // film/lit toggle affects background overlay AND data source
    const bg = document.getElementById("bg");
    const btnFilm = document.getElementById("btn-film");
    const btnLit = document.getElementById("btn-lit");

    function setSource(source) {
      const isFilm = source === "film";
      btnFilm.classList.toggle("active", isFilm);
      btnLit.classList.toggle("active", !isFilm);

      bg.classList.toggle("theater", isFilm);
      bg.classList.toggle("library", !isFilm);

      document.dispatchEvent(new CustomEvent("sourcechange", { detail: { source } }));
    }

    btnFilm.addEventListener("click", () => setSource("film"));
    btnLit.addEventListener("click", () => setSource("literature"));

    // default: film
    setSource("film");
  </script>
</body>
</html>
